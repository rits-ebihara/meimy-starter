# ガイドライン

## Meimy の目的

* EIMは、正式にはモバイルブラウザをサポートしておらず、画面デザイもPC用のサイズのブラウザにしか対応していない。
* 昨今の各社サービスでは、Webブラウザだけでなく、ネイティブアプリも用意しており、よりリッチなユーザー体験を提供している。
* 以上のことから、EIMのアプリもモバイルネイティブアプリとして提供することが求められている。
* その開発と展開を迅速に行うため、ガイドラインやフレームワークの整備が急務である。
* モバイルデバイスの対象としては、普及率の高い Android/iOS とする。

## Meimy の方針

* 高品質なアプリを高い効率性、速度で開発できること。
* アプリごとに操作性、画面デザインが異ならないこと。
* 開発において特定の技術者に依存させないようにするため、学習コストを低く抑える。

## Meimy の名称

本フレームワークの開発コード "Mobile EIM Yield" = "MEIMY" としている。

## 画面設計

### OS のデザインを尊重する

* React Native は、UIの部品をネイティブコードに変換するため、OSごとの標準的なデザインが適用される。
* モバイルアプリは、ユーザの混乱を招かないため、OSの標準に従うことが基本となる。
* 過度な装飾は控えることで、アプリの操作に統一感をもたせられ、開発・改修の効率が上がる。

### Native Base で提供されている部品を利用する

* React Native で用意されている部品は多くない。
* 自作することは極力避け、[Native Base](https://nativebase.io/) を利用することで、はい初効率の向上、アプリ間の操作性の統一を図る。

### 画面遷移の管理には、React Navigation を利用する

* 複雑な画面遷移の仕組みを自作することは、車輪の再発明である。
* React Native の開発で標準的な [React Navigation](https://reactnavigation.org/)を利用する。

### 部品の配置、形状などは Material Design を参考にする

* 独自のルールはなるべく作らない。
* ボタンなどの配置、色、形状は、[Material Design](https://material.io/design/) を参考にすることで、標準的でより良いUXを提供できる。

抜粋だが日本語で分かりやすいサイト:[【2018年版】マテリアルデザインとは？作り方とガイドラインまとめ](https://saruwakakun.com/html-css/material)

### アイコンは、Native Base で用意される アイコンフォントを利用すること

* 画像も利用できるが、それを探したり作ったり、サイズを調整したりするのは非常に時間がかかる。
* Native Base では、多数のアイコンフォントを用意しているので、これを利用する。
* フォントのため、単色だが色の変更もできる。画像の場合、色のバリエーションが必要な場合でもその数だけファイルが必要だが、アイコンフォントの場合、CSSで対応できる。

[React Native - Components - icon](http://docs.nativebase.io/Components.html#header-transparent-headref)

### アニメーションは必要な箇所にのみ適用する

* ユーザーは、見た目の派手さより軽快さを望む。
* アニメーションは、変化を視覚で捉えることにより、何が起こったかが判断できるので有効なシーンも有る。しかし、必要以上のものはユーザーを待たせることになり、満足度が低下する。
* まず、アニメーションなしで作り、それを取り入れたほうがユーザーがわかりやすい、と判断したところに適用する。

### 現実世界の模倣は必要ない

Material Design はシンプルさによる統一を求める。

よって、現実世界のものに似せたリアルなアイコンやボタンは、シンプルではないため利用しない。抽象的で複雑でなく、単色なものとすること。

アイコンでれば、Native Base で用意されているものを利用すること。

### 色に注意する

* 例えば赤は、ほとんどの地域で危険、NGのイメージを与え、青や緑は安全、OKのイメージを与えます。これを逆の意味で利用してはいけない。
* UCD(ユニバーサル・カラー・デザイン)に配慮する。
  * 色だけで状態等を識別するようなアイテムは利用しない。
  * 強調を色だけで表現することはしない。
  * UCDのチェックツールなどで確認することを推奨する。
  * Android であれば、開発者ツールに"色空間シミュレート"と言う機能があり、これで色盲、色弱のシミュレートができる。(iOSにはないと思われる)

## セキュリティ

### OWASP Mobile Application Security Verification Standard (MASVS) に準じる

* セキュリティ要件は、一般的なモバイルアプリケーションに要求されるものを満たす必要がある。
* OWASPとは
    > 引用：https://www.owasp.org/index.php/Japan  
    > OWASP - Open Web Application Security Project とは、Webをはじめとするソフトウェアのセキュリティ環境の現状、またセキュアなソフトウェア開発を促進する技術・プロセスに関する情報共有と普及啓発を目的としたプロフェッショナルの集まる、オープンソース・ソフトウェアコミュニティです。The OWASP Foundationは、NPO団体として全世界のOWASPの活動を支えています。
* MASVSとは、OWASPによる、iOSとAndroidのモバイルアプリケーションを設計、開発、テストするときに必要とされるセキュリティ要件のフレームワークを定めるための取り組みです。
* モバイルアプリケーションのセキュリティ要件のドキュメントおよびチェックリストが公開されており、本ガイドラインもこれに準じることとする。

### MASVSのセキュリティ検証レベル

MASVSでは、アプリの重要度に応じて、LV1,LV2 が定義されている。またアプリの性質において リバースエンジニアリングと改ざんに対する耐性(+R) の検証を付与することができるとしている。

EIMアプリとしては、一定のセキュリティ要件と開発効率性を考慮し、原則として LV1 を対象とする。

ただし、アプリ毎の重要性、性質において、LV2 や +R が必要となる場合がある。

その検討を必ず行うこと。

### MASVSドキュメントとチェックリスト

ドキュメントは、下記サイトを参照のこと。

[owasp-masvs/Document-ja at master · OWASP/owasp-masvs](https://github.com/OWASP/owasp-masvs/tree/master/Document-ja)

チェックリストは、下記サイトからダウンロードできる。また、本ガイドラインにも含めている。(Mobile_App_Security_Checklist-Japanese.xlsx v1.1-ja)

[owasp-mstg/Checklists at master · OWASP/owasp-mstg](https://github.com/OWASP/owasp-mstg/tree/master/Checklists)


### データの永続化について

* データを永続化する場合、React Native の標準の AsyncStorage は、暗号化されない領域に保存されるので、パスワードなど機微な情報の保存には利用しない。
* 暗号化して保存する手法は複雑なので、機微な情報は永続化しない。
* 永続化するデータについては、その必要性を十分に検討し、必要最低限なものにすること。
* 端末の外部ストレージ(SDカード)に保存することは禁止する。

### キャッシング

* 一時的な保持には、[react-native-fs](https://github.com/itinance/react-native-fs) の `CacheDirectoryPath`でキャッシュディレクトリを取得し、同ライブラリで読み書きする。

## 開発環境

### 必須

* OS: Windows (10以降)/maxOS (Sierra 以降) で可能。
  * iOS 用のビルド、デプロイを行うときには、macOS が必要。
  * インターネットに認証なしでアクセスできる環境。(社内からは、[インターネットダイレクト接続](https://portal.staff.jp.ricoh.com/rfg/it/manual/index.php/DIRECTCONNECTION)を参照のこと)
* Android Studio, Xcode(macOSのみ)

### 推奨
* 高性能PC (Core i7(第7世代以上), Memory 16GB以上, SSD)
  * HDD ではデバッグ等が遅く、開発効率に大きな影響がある。
* コードエディタ: Visual Studio Code
* Android, iPhone 実機
